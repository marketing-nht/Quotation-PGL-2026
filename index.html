<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PGL AI Pricing Assistant</title>
  <meta name="description" content="Trợ lý AI tra cứu báo giá thử nghiệm Phúc Gia Lab">
  
  <script src="https://cdn.tailwindcss.com"></script>
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
    .animate-fadeIn { animation: fadeIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
    .animate-slideUp { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @media print {
      body { background-color: white; }
      aside, header, form, .no-print { display: none !important; }
      main { margin: 0 !important; padding: 0 !important; }
      .print-only { display: block !important; }
      .shadow-sm, .shadow-md, .shadow-lg { box-shadow: none !important; }
      .border { border: 1px solid #ddd !important; }
    }
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #f1f5f9; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    
    /* Error Banner Style */
    #error-banner { display: none; padding: 20px; background: #fee2e2; color: #991b1b; text-align: center; border-bottom: 1px solid #f87171; position: fixed; top: 0; left: 0; width: 100%; z-index: 9999; }
  </style>

  <script type="importmap">
  {
    "imports": {
      "react": "https://esm.sh/react@18.2.0",
      "react-dom": "https://esm.sh/react-dom@18.2.0",
      "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
      "@google/generative-ai": "https://esm.sh/@google/generative-ai@0.21.0",
      "lucide-react": "https://esm.sh/lucide-react@0.294.0?external=react",
      "htm": "https://esm.sh/htm@3.1.1"
    }
  }
  </script>

  <script>
    window.onerror = function(message, source, lineno, colno, error) {
      const banner = document.getElementById('error-banner');
      if (banner) {
        banner.style.display = 'block';
        banner.innerHTML = `<strong>Lỗi hệ thống:</strong> ${message}<br><small>${source}:${lineno}</small>`;
      }
    };
  </script>
</head>
<body>
  <div id="error-banner"></div>
  <div id="root"></div>

  <script type="module">
    import React, { useState, useEffect } from 'react';
    import ReactDOM from 'react-dom/client';
    import { GoogleGenerativeAI } from '@google/generative-ai';
    import { 
      Search, Calculator, FileText, Settings, Info, Loader2, AlertCircle, Copy, Check, Key, ShieldCheck, X, Printer
    } from 'lucide-react';
    import htm from 'htm';

    const html = htm.bind(React.createElement);

    // --- CONFIGURATION ---
    // Điền API Key của bạn vào đây nếu muốn hard-code (không khuyến khích public lên github)
    const RUNTIME_API_KEY = ""; 

    // --- DATA CONTEXT ---
    const PGL_PRICING_CONTEXT = `
[DỮ LIỆU BÁO GIÁ TỪ PDF - SỐ: 26010201/PGL-BG - NGÀY: 02/01/2026]

1. CHỨNG NHẬN HỢP QUY (QCVN 9:2012/BKHCN - Thiết bị gia dụng):
Điều hòa thường: 2.000.000 VNĐ (77 USD).
Điều hòa Multi (1 mẹ 2 con): 3.000.000 VNĐ (115 USD). Thêm 1 mặt lạnh cộng thêm 1.000.000 VNĐ.
Đồng giá 2.000.000 VNĐ (77 USD) cho các sản phẩm: Tủ lạnh, Tủ giữ lạnh thương mại, Lò vi sóng, Bếp điện, Máy xay sinh tố, Máy xay thịt, Máy ép trái cây, Máy đánh trứng, Máy sấy tóc, Bình nước nóng tức thời, Máy giặt, Máy khoan tay, Máy hút bụi.
Phí cấp lại bản gốc tiếp theo: 500.000 VNĐ.

2. CHỨNG NHẬN HỢP QUY (QCVN 4:2009/BKHCN & QCVN 25:2025/BKHCN):
Phương thức 1 (QCVN 25:2025 - Ổ cắm/Phích cắm/Dây nguồn): 5.000.000 VNĐ.
Phương thức 5 (Đánh giá nhà máy QCVN 4 & 25):
Trong nước: Đánh giá quá trình SX: 30.000.000 VNĐ; Giám sát: 15.000.000 VNĐ.
Nước ngoài: Đánh giá quá trình SX: 50.000.000 VNĐ; Giám sát: 25.000.000 VNĐ.
Phương thức 7 (Theo lô hàng QCVN 4 - Safety):
Lô 1-5 model: 3.000.000 VNĐ.
Lô 6-10 model: 4.000.000 VNĐ.
Lô 11-15 model: 5.000.000 VNĐ.
Lô >15 model: 6.000.000 VNĐ.
Phương thức 7 (Theo lô hàng QCVN 25:2025 - Ổ cắm/Phích cắm):
Lô 1-5 model: 6.000.000 VNĐ.
Lô 6-10 model: 7.000.000 VNĐ.
Lô 11-15 model: 8.000.000 VNĐ.
Lô >15 model: 9.000.000 VNĐ.

3. THỬ NGHIỆM HIỆU SUẤT NĂNG LƯỢNG (VNEEP):
Điều hòa (Non-Inverter <= 60.000 BTU): 15.000.000 VNĐ.
Điều hòa (Inverter <= 60.000 BTU): 20.000.000 VNĐ.
Tủ lạnh, Tủ đông, Tủ mát, Tủ giữ lạnh thương mại: 9.000.000 VNĐ.
Bếp từ/Hồng ngoại (1 vùng nấu): 3.000.000 VNĐ.
Bếp từ/Hồng ngoại (2-3 vùng nấu): 5.000.000 VNĐ.
Bếp từ/Hồng ngoại (4-5 vùng nấu): 7.000.000 VNĐ.
Quạt điện: 2.000.000 VNĐ (<50W) hoặc 3
